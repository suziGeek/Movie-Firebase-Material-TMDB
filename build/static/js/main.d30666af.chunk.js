(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{5155:function(e,a,t){e.exports=t(5199)},5161:function(e,a,t){},5176:function(e,a,t){},5199:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(19),i=t.n(o),l=(t(5160),t(5161),t(5316)),s=t(11),c=t(12),u=t(13),m=t(14),d=t(138),p=t.n(d),h=t(5314),f=t(5315),g=t(5204),E=t(5323),v=(t(5163),t(64));t(5169),t(5170),t(5171),t(5172),t(5173);v.initializeApp({apiKey:"AIzaSyBJHZRI01LDK-aGm_tvfwHLUKVDP8F6uoo",authDomain:"react-tmdb-movie-app.firebaseapp.com",databaseURL:"https://tmdb-movie-app.firebaseio.com",projectId:"tmdb-movie-app",storageBucket:"tmdb-movie-app.appspot.com",messagingSenderId:"894860019248",appId:"1:894860019248:web:6bae2e2dce08b006240ff5",measurementId:"G-995W50NDG2"});var b=v,y=v.analytics(),C=v.auth(),A=v.firestore(),S=v.storage(),w=(v.performance(),t(51)),k=t.n(w),P={signUp:function(e){return new Promise((function(a,t){if(e){var n=e.firstName,r=e.lastName,o=e.username,i=e.emailAddress,l=e.password;n&&r&&o&&i&&l?C.currentUser?t():C.createUserWithEmailAndPassword(i,l).then((function(e){var i=e.user;if(i){var l=i.uid;if(l)A.collection("users").doc(l).set({firstName:n,lastName:r,username:o}).then((function(e){y.logEvent("sign_up",{method:"password"}),a(e)})).catch((function(e){t(e)}));else t()}else t()})).catch((function(e){t(e)})):t()}else t()}))},signUpWithEmailAddressAndPassword:function(e,a){return new Promise((function(t,n){e&&a?C.currentUser?n():C.createUserWithEmailAndPassword(e,a).then((function(e){var a=e.user;if(a){var r=a.uid;if(r)A.collection("users").doc(r).set({},{merge:!0}).then((function(e){y.logEvent("sign_up",{method:"password"}),t(e)})).catch((function(e){n(e)}));else n()}else n()})).catch((function(e){n(e)})):n()}))},signIn:function(e,a){return new Promise((function(t,n){e&&a?C.currentUser?n():C.signInWithEmailAndPassword(e,a).then((function(e){var a=e.user;if(a){var r=a.uid;if(r){var o=A.collection("users").doc(r);o.get({source:"server"}).then((function(e){e.exists?(y.logEvent("login",{method:"password"}),t(a)):o.set({},{merge:!0}).then((function(e){y.logEvent("login",{method:"password"}),t(a)})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}else n()}else n()})).catch((function(e){n(e)})):n()}))},sendSignInLinkToEmail:function(e){return new Promise((function(a,t){if(e)if(C.currentUser)t();else{C.sendSignInLinkToEmail(e,{url:"",handleCodeInApp:!0}).then((function(t){y.logEvent("send_sign_in_link_to_email"),localStorage.setItem("emailAddress",e),a(t)})).catch((function(e){t(e)}))}else t()}))},signInWithEmailLink:function(e,a){return new Promise((function(t,n){e&&a?C.currentUser?n():C.signInWithEmailLink(e,a).then((function(e){y.logEvent("login",{method:"email-link"}),localStorage.removeItem("emailAddress"),t(e)})).catch((function(e){n(e)})):n()}))},signInWithAuthProvider:function(e){return new Promise((function(a,t){if(e){var n=new b.auth.OAuthProvider(e);n?C.currentUser?t():C.signInWithPopup(n).then((function(n){var r=n.user;if(r){var o=r.uid;if(o){var i=A.collection("users").doc(o);i.get({source:"server"}).then((function(n){n.exists?(y.logEvent("login",{method:e}),a(r)):i.set({},{merge:!0}).then((function(t){y.logEvent("login",{method:e}),a(r)})).catch((function(e){t(e)}))})).catch((function(e){t(e)}))}else t()}else t()})).catch((function(e){t(e)})):t()}else t()}))},linkAuthProvider:function(e){return new Promise((function(a,t){if(e){var n=new b.auth.OAuthProvider(e);if(n){var r=C.currentUser;r?r.linkWithPopup(n).then((function(t){y.logEvent("link_auth_provider",{providerId:e}),a(t)})).catch((function(e){t(e)})):t()}else t()}else t()}))},unlinkAuthProvider:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;n?n.unlink(e).then((function(t){y.logEvent("unlink_auth_provider",{providerId:e}),a(t)})).catch((function(e){t(e)})):t()}else t()}))},authProviderData:function(e){if(e){var a=C.currentUser;if(a){var t=a.providerData;if(t)return t.find((function(a){return a.providerId===e}))}}},signOut:function(){return new Promise((function(e,a){C.currentUser?C.signOut().then((function(a){y.logEvent("sign_out"),e(a)})).catch((function(e){a(e)})):a()}))},resetPassword:function(e){return new Promise((function(a,t){e?C.currentUser?t():C.sendPasswordResetEmail(e).then((function(e){y.logEvent("reset_password"),a(e)})).catch((function(e){t(e)})):t()}))},changeAvatar:function(e){return new Promise((function(a,t){if(e){if(["image/gif","image/jpeg","image/png","image/webp","image/svg+xml"].includes(e.type))if(e.size>20971520)t();else{var n=C.currentUser;if(n){var r=n.uid;if(r){var o=S.ref().child("images").child("avatars").child(r);o.put(e).then((function(e){o.getDownloadURL().then((function(e){n.updateProfile({photoURL:e}).then((function(e){y.logEvent("change_avatar"),a(e)})).catch((function(e){t(e)}))})).catch((function(e){t(e)}))})).catch((function(e){t(e)}))}else t()}else t()}else t()}else t()}))},removeAvatar:function(){return new Promise((function(e,a){var t=C.currentUser;if(t){var n=t.uid;n?t.updateProfile({photoURL:null}).then((function(t){S.ref().child("images").child("avatars").child(n).delete().then((function(a){y.logEvent("remove_avatar"),e(a)})).catch((function(e){a(e)}))})).catch((function(e){a(e)})):a()}else a()}))},changeFirstName:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({firstName:e}).then((function(e){y.logEvent("change_first_name"),a(e)})).catch((function(e){t(e)}));else t()}else t()}else t()}))},changeLastName:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({lastName:e}).then((function(e){y.logEvent("change_last_name"),a(e)})).catch((function(e){t(e)}));else t()}else t()}else t()}))},changeUsername:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({username:e}).then((function(e){y.logEvent("change_username"),a(e)})).catch((function(e){t(e)}));else t()}else t()}else t()}))},changeEmailAddress:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;if(n)n.uid?n.updateEmail(e).then((function(e){y.logEvent("change_email_address"),a(e)})).catch((function(e){t(e)})):t();else t()}else t()}))},changePassword:function(e){return new Promise((function(a,t){if(e){var n=C.currentUser;if(n){var r=n.uid;r?n.updatePassword(e).then((function(e){A.collection("users").doc(r).update({lastPasswordChange:b.firestore.FieldValue.serverTimestamp()}).then((function(e){y.logEvent("change_password"),a(e)})).catch((function(e){t(e)}))})).catch((function(e){t(e)})):t()}else t()}else t()}))},verifyEmailAddress:function(){return new Promise((function(e,a){var t=C.currentUser;t?t.sendEmailVerification().then((function(a){y.logEvent("verify_email_address"),e(a)})).catch((function(e){a(e)})):a()}))},deleteAccount:function(){return new Promise((function(e,a){var t=C.currentUser;t?t.delete().then((function(a){y.logEvent("delete_account"),e(a)})).catch((function(e){a(e)})):a()}))},getRoles:function(){return new Promise((function(e,a){var t=C.currentUser;t?t.getIdTokenResult().then((function(a){e(a.claims.roles)})).catch((function(e){a(e)})):a()}))},isAdmin:function(){return new Promise((function(e,a){P.getRoles().then((function(a){e(a.includes("admin"))})).catch((function(e){a(e)}))}))},isPremium:function(){return new Promise((function(e,a){P.getRoles().then((function(a){e(a.includes("premium"))})).catch((function(e){a(e)}))}))},getName:function(e){if(!e)return null;var a=e.firstName,t=e.username,n=e.displayName,r=e.lastName;return a||(t||(n||(r||null)))},getFullName:function(e){if(!e)return null;var a=e.firstName,t=e.lastName,n=e.displayName;return a&&t?"".concat(a," ").concat(t):n||null},getNameInitials:function(e){if(!e)return null;var a=e.firstName,t=e.lastName,n=e.username,r=e.displayName;return a&&t?a.charAt(0)+t.charAt(0):a?a.charAt(0):n?n.charAt(0):t?t.charAt(0):r?r.charAt(0):null},getProfileCompletion:function(e){if(!e)return null;if(!(e=[e.photoURL,e.firstName,e.lastName,e.username,e.email,e.email&&e.emailVerified]))return null;var a=0;return e.forEach((function(t){t&&(a+=100/e.length)})),Math.floor(a)},getSecurityRating:function(e,a){if(!e||!e.metadata)return null;var t=e.metadata.creationTime;if(!t)return null;t=k()(t);var n=0;if(a&&a.lastPasswordChange){var r=a.lastPasswordChange;r&&(r=k()(r.toDate()),n=t.diff(r,"days")>=365.242199?50:100)}else n=k()().diff(t,"days")>=365.242199?50:100;return n}},O=P,D=t(139),j=t.n(D),I=t(151),x=t(99),N=t(100),U=t(5243),_=t(5244),T=t(101),R=t(102),F=t(5245),L=t(5246),W=t(5247),B=t(103),K=t(5248),M=t(5249),z=t(5250),q=t(5251),V=t(104),H=t(5252),G=t(5253),Y=t(105),J=t(5254),Q={red:{id:"red",name:"Red",import:x.a},pink:{id:"pink",name:"Pink",import:N.a},purple:{id:"purple",name:"Purple",import:U.a},deepPurple:{id:"deep-purple",name:"Deep Purple",import:_.a},indigo:{id:"indigo",name:"Indigo",import:T.a},blue:{id:"blue",name:"Blue",import:R.a},lightBlue:{id:"light-blue",name:"Light Blue",import:F.a},cyan:{id:"cyan",name:"Cyan",import:L.a},teal:{id:"teal",name:"Teal",import:W.a},green:{id:"green",name:"Green",import:B.a},lightGreen:{id:"light-green",name:"Light Green",import:K.a},lime:{id:"lime",name:"Lime",import:M.a},yellow:{id:"yellow",name:"Yellow",import:z.a},amber:{id:"amber",name:"Amber",import:q.a},orange:{id:"orange",name:"Orange",import:V.a},deepOrange:{id:"deep-orange",name:"Deep Orange",import:H.a},brown:{id:"brown",name:"Brown",import:G.a},gray:{id:"gray",name:"Gray",import:Y.a},blueGray:{id:"blue-gray",name:"Blue Gray",import:J.a}},Z=function(e){return e?(e=j()(e),Q[e]):null},X=Z("blue"),$=Z("red"),ee=Object(I.a)({palette:{primary:X.import,secondary:$.import,type:"dark"},primaryColor:X,secondaryColor:$,dark:!0}),ae={};ae.colors=Q,ae.defaultPrimaryColor=X,ae.defaultSecondaryColor=$,ae.defaultDark=!0,ae.defaultTheme=ee,ae.isDefaultTheme=function(e){return!!e&&(e.primaryColor.id===X.id&&e.secondaryColor.id===$.id&&!0===e.dark)},ae.createTheme=function(e){if(!e)return null;var a=e.primaryColor,t=e.secondaryColor,n=e.dark;return a&&t?(a=Z(a),t=Z(t),a&&t?e=Object(I.a)({palette:{primary:a.import,secondary:t.import,type:n?"dark":"light"},primaryColor:a,secondaryColor:t,dark:n}):null):null},ae.changeTheme=function(e){return new Promise((function(a,t){if(e){var n=e.primaryColor,r=e.secondaryColor,o=e.dark;if(n&&r)if(n=Z(n),r=Z(r),n&&r){var i=C.currentUser;if(i){var l=i.uid;if(l)A.collection("users").doc(l).update({theme:{primaryColor:n.id,secondaryColor:r.id,dark:o}}).then((function(t){y.logEvent("change_theme",{theme:e}),a(t)})).catch((function(e){t(e)}));else t()}else t()}else t();else t()}else t()}))},ae.changePrimaryColor=function(e){return new Promise((function(a,t){if(e)if(e=Z(e)){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({"theme.primaryColor":e.id}).then((function(t){y.logEvent("change_primary_color",{primaryColor:e.id}),a(t)})).catch((function(e){t(e)}));else t()}else t()}else t();else t()}))},ae.changeSecondaryColor=function(e){return new Promise((function(a,t){if(e)if(e=Z(e)){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({"theme.secondaryColor":e.id}).then((function(t){y.logEvent("change_secondary_color",{secondaryColor:e.id}),a(t)})).catch((function(e){t(e)}));else t()}else t()}else t();else t()}))},ae.changeDark=function(e){return new Promise((function(a,t){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({"theme.dark":e}).then((function(t){y.logEvent("change_dark",{dark:e}),a(t)})).catch((function(e){t(e)}));else t()}else t()}))},ae.changeSyncAppearance=function(e){return new Promise((function(a,t){var n=C.currentUser;if(n){var r=n.uid;if(r)A.collection("users").doc(r).update({"theme.syncAppearance":e}).then((function(t){y.logEvent("change_sync_appearance",{syncAppearance:e}),a(t)})).catch((function(e){t(e)}));else t()}else t()}))},ae.resetTheme=function(){return new Promise((function(e,a){var t=C.currentUser;if(t){var n=t.uid;if(n)A.collection("users").doc(n).update({theme:b.firestore.FieldValue.delete()}).then((function(a){y.logEvent("reset_theme"),e(a)})).catch((function(e){a(e)}));else a()}else a()}))};var te=ae,ne=t(38),re=t(5264),oe=t(21),ie=t(24),le=(t(5176),t(5263)),se={state:{},setState:function(e){var a=this;this.state=e,this.setters.forEach((function(e){return e(a.state)}))},setters:[]};function ce(){var e=Object(n.useState)(se.state),a=Object(oe.a)(e,2),t=a[0],r=a[1];return se.setters.includes(r)||se.setters.push(r),[t,se.setState]}se.setState=se.setState.bind(se);var ue=t(50),me=t(5257),de=t(144),pe=t.n(de),he=t(5255),fe=t(145),ge=t.n(fe),Ee=Object(he.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"center",height:50,backgroundColor:e.palette.background.paper},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},contphot:{margin:"5px 25px 10px 25px"},photo:{width:300,transition:".3s ease-in-out","&:hover":{transform:"scale(0.99)",opacity:.5}},titleBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,0) 100%)"},icon:{color:"white"},buttPosition:{top:0,left:0,position:"absolute"}}})),ve=null,be="test";se.state="";var ye=function(e){var a=e.movie,t=Ee(),o=ce(),i=Object(oe.a)(o,2),l=(i[0],i[1]),s=C.currentUser,c=r.a.useState(!1),u=Object(oe.a)(c,2),m=u[0],d=u[1],p=b.firestore(),h=a.title,f=r.a.useState(!1),g=Object(oe.a)(f,2);g[0],g[1];Object(n.useEffect)((function(){be.includes(a.title)?d(!0):d(!1)}),[]),s?b.auth().onAuthStateChanged((function(e){ve=e.uid,be=e.favorites,console.log(be)})):console.log("no user logged in firebase auth"),console.log(a.id),console.log("this is movie id");var E="N/A"===a.poster?"https://m.media-amazon.com/images/M/MV5BMTczNTI2ODUwOF5BMl5BanBnXkFtZTcwMTU0NTIzMw@@._V1_SX300.jpg":"https://image.tmdb.org/t/p/w500"+a.poster_path;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.contphot},r.a.createElement(me.a,{key:a.id},r.a.createElement(ue.b,{to:"./MovieDetail",onClick:function(){l(a.id)},value:a.id},r.a.createElement("img",{className:t.photo,src:E,alt:a.title})),r.a.createElement("div",{className:t.buttPosition},r.a.createElement("button",{onClick:s?m?function(){d(!1),console.log("remove starfill"),p.collection("users").doc(ve).update({favorites:b.firestore.FieldValue.arrayRemove(h)})}:function(){console.log("add starfill"),d(!0),p.collection("users").doc(ve).update({favorites:b.firestore.FieldValue.arrayUnion(h)})}:null},s?m?r.a.createElement(ge.a,null):r.a.createElement(pe.a,null):"Login",console.log({starFill:m}),console.log("userFavorites",{userFav:be}))))))},Ce=function(e){var a=Object(n.useState)(""),t=Object(oe.a)(a,2),o=t[0],i=t[1];console.log(o);var l=o.length>0&&o.length>0;return r.a.createElement("form",{className:"search"},r.a.createElement("input",{required:!0,value:o,onChange:function(e){i(e.target.value)},type:"text",name:"searchTerm",placeholder:"Search For Movies"}),r.a.createElement("button",{disabled:!l,onClick:function(a){e.search(o),i(""),a.preventDefault()},type:"submit",value:"SEARCH_VALUE",required:!0},"SEARCH"))},Ae=t(5201),Se=t(152),we=t(5262),ke=t(146),Pe=t.n(ke),Oe=function(e){var a=r.a.useState(null),t=Object(oe.a)(a,2),o=t[0],i=t[1],l=Boolean(o),s=Object(n.useState)([]),c=Object(oe.a)(s,2),u=c[0],m=c[1],d=Object(n.useState)(""),p=Object(oe.a)(d,2),h=p[0];p[1];Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=dc15dc94ad3132023e29552c1fe96161&language=en-US").then((function(e){return e.json()})).then((function(e){return m(e.genres)}))}),[]),console.log(e),console.log("this is props");var f=function(a){e.genre(a.target.value),i(null)};return r.a.createElement("div",null,r.a.createElement(Ae.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},r.a.createElement("p",null,"Genres")," ",r.a.createElement(Pe.a,null)),r.a.createElement(Se.a,{id:"long-menu",anchorEl:o,keepMounted:!0,open:l,onClose:f,PaperProps:{style:{maxHeight:216,width:"20ch"}}},u.map((function(e){return r.a.createElement(we.a,{key:e.id,selected:"Pyxis"===e,onClick:f,value:e.id,data:h},e.name)}))))},De={loading:!0,movies:[],errorMessage:null},je=function(e,a){switch(a.type){case"SEARCH_MOVIES_REQUEST":return Object(ie.a)({},e,{loading:!0,errorMessage:null});case"SEARCH_MOVIES_SUCCESS":return Object(ie.a)({},e,{loading:!1,movies:a.payload});case"SEARCH_MOVIES_FAILURE":return Object(ie.a)({},e,{loading:!1,errorMessage:a.error});default:return e}},Ie=function(){var e=Object(n.useReducer)(je,De),a=Object(oe.a)(e,2),t=a[0],o=a[1];Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/search/movie?api_key=dc15dc94ad3132023e29552c1fe96161&query=Batman").then((function(e){return e.json()})).then((function(e){o({type:"SEARCH_MOVIES_SUCCESS",payload:e.results})}))}),[]);var i=t.movies,l=t.errorMessage,s=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{search:function(e){console.log({searchValue:e}),console.log("searchvalue"),o({type:"SEARCH_MOVIES_REQUEST"}),fetch("https://api.themoviedb.org/3/search/movie?api_key=dc15dc94ad3132023e29552c1fe96161&query=".concat(e)).then((function(e){return e.json()})).then((function(e){console.log("this is search"),o({type:"SEARCH_MOVIES_SUCCESS",payload:e.results})}))}}),r.a.createElement(Oe,{genre:function(e){console.log(e),console.log("genre"),o({type:"SEARCH_MOVIES_REQUEST"}),fetch("https://api.themoviedb.org/3/discover/movie?api_key=dc15dc94ad3132023e29552c1fe96161&language=pt-BR&with_genres=".concat(e)).then((function(e){return e.json()})).then((function(e){console.log("yes to genres"),o({type:"SEARCH_MOVIES_SUCCESS",payload:e.results})}))}}),r.a.createElement(le.a,{container:!0,spacing:3,direction:"row",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},s&&!l?r.a.createElement("span",null,"loading... "):l?r.a.createElement("div",{className:"errorMessage"},l):i.map((function(e,a){return r.a.createElement(ye,{key:"".concat(a,"-").concat(e.title),movie:e})}))))},xe=t(5317),Ne=t(52),Ue=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e,a,t=this.props,n=t.type,o=t.size,i=t.padding,l=t.icon,s=t.title,c=t.description;return"small"===o?(e="h3.fontSize",a="h6"):"medium"===o?(e="h2.fontSize",a="h5"):"big"===o&&(e="h1.fontSize",a="h4"),"content"===n?r.a.createElement(Ie,null):"card"===n?r.a.createElement(xe.a,{padding:i,textAlign:"center"},l&&r.a.createElement(xe.a,{clone:!0,color:"text.secondary",fontSize:e},l),s&&r.a.createElement(Ne.a,{color:"textSecondary",variant:a},s),c&&r.a.createElement(Ne.a,{color:"textSecondary",variant:"body1"},c)):null}}]),t}(n.Component);Ue.defaultProps={type:"content",size:"medium",padding:2};var _e=Ue,Te=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).state={hasError:!1,eventId:null},n}return Object(c.a)(t,[{key:"componentDidCatch",value:function(e,a){var t=this;ne.b((function(n){n.setExtras(a);var r=ne.a(e);t.setState({eventId:r})}))}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?r.a.createElement(_e,{icon:r.a.createElement(re.a,null),title:"Something went wrong"}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component),Re=t(5),Fe=t(5265),Le=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.center},r.a.createElement(Fe.a,null))}}]),t}(n.Component),We=Object(Re.a)((function(e){return{center:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"}}}))(Le),Be=t(5269),Ke=t(5270),Me=t(5271),ze=t(5272),qe=t(5328),Ve=t(5267),He=t(5266),Ge=t(5268),Ye=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props,t=a.context,n=a.user,o=a.defaultCursor;if("standalone"===t){if(!n)return r.a.createElement(He.a,null);var i=n.photoURL;if(i)return r.a.createElement(qe.a,{alt:"Avatar",src:i});var l=O.getNameInitials(Object(ie.a)({},n));return l?r.a.createElement(qe.a,{alt:"Avatar"},r.a.createElement("span",{className:o&&e.nameInitials},l)):r.a.createElement(He.a,null)}if("list"===t){if(!n)return r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,r.a.createElement(Ge.a,null)));var s=n.photoURL;if(s)return r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{alt:"Avatar",src:s}));var c=O.getNameInitials(Object(ie.a)({},n));return c?r.a.createElement(Ve.a,null,r.a.createElement(qe.a,{alt:"Avatar"},r.a.createElement("span",{className:o&&e.nameInitials},c))):r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,r.a.createElement(Ge.a,null)))}return null}}]),t}(n.Component);Ye.defaultProps={context:"standalone"};var Je=Object(Re.a)((function(e){return{nameInitials:{cursor:"default"}}}))(Ye),Qe=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).openMenu=function(e){var a=e.currentTarget;n.setState({menu:{anchorEl:a}})},n.closeMenu=function(){n.setState({menu:{anchorEl:null}})},n.state={menu:{anchorEl:null}},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.performingAction,n=a.user,o=a.userData,i=a.roles,l=this.props,s=l.onAboutClick,c=l.onSettingsClick,u=l.onSignOutClick,m=l.onSignUpClick,d=l.onSignInClick,p=this.state.menu,h=[{name:"About",onClick:s},{name:"Profile",to:n?"/user/".concat(n.uid):null},{name:"Settings",onClick:c},{name:"Sign out",divide:!0,onClick:u}];return r.a.createElement(Be.a,{color:"dark",position:"static"},r.a.createElement(Ke.a,null,r.a.createElement(xe.a,{display:"flex",flexGrow:1},r.a.createElement(Ne.a,{color:"dark",variant:"h6"},r.a.createElement(ue.b,{to:"/"},"My Movie App"))),n&&r.a.createElement(r.a.Fragment,null,i.includes("admin")&&r.a.createElement(xe.a,{mr:1},r.a.createElement(g.a,{color:"inherit",component:ue.b,to:"/admin",variant:"outlined"},"Admin")),r.a.createElement(Ae.a,{color:"inherit",disabled:t,onClick:this.openMenu},r.a.createElement(Je,{user:Object.assign(n,o)})),r.a.createElement(Se.a,{anchorEl:p.anchorEl,open:Boolean(p.anchorEl),onClose:this.closeMenu},h.map((function(a,t){if(a.hasOwnProperty("condition")&&!a.condition)return null;var n=null;return n=a.to?r.a.createElement(we.a,{key:t,component:ue.b,to:a.to,onClick:e.closeMenu},a.name):r.a.createElement(we.a,{key:t,onClick:function(){e.closeMenu(),a.onClick()}},a.name),a.divide?r.a.createElement("span",{key:t},r.a.createElement(Me.a,null),n):n})))),!n&&r.a.createElement(ze.a,{color:"inherit",disabled:t,variant:"outlined"},r.a.createElement(g.a,{onClick:m},"Sign up"),r.a.createElement(g.a,{onClick:d},"Sign in"))))}}]),t}(n.Component);Qe.defaultProps={performingAction:!1};var Ze=Qe,Xe=t(61),$e=t(5273),ea=t(5274),aa=t(5277),ta=t(5276),na=t(5275),ra=t(111),oa=t.n(ra),ia=t(147);function la(e){var a=Object(n.useState)([]),t=Object(oe.a)(a,2),r=t[0],o=t[1],i=Object(n.useState)(!0),l=Object(oe.a)(i,2),s=l[0],c=l[1];function u(){return(u=Object(ia.a)(oa.a.mark((function a(){var t,n;return oa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e);case 2:return t=a.sent,a.next=5,t.json();case 5:n=a.sent,o(n),c(!1);case 8:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]),[r,s]}var sa=Object(he.a)({root:{maxWidth:345}}),ca=null;function ua(e){var a=ce(),t=Object(oe.a)(a,2),o=(t[0],t[1],Object(n.useState)(!0)),i=Object(oe.a)(o,2),l=i[0],s=i[1],c=sa(),u=ce()[0],m=C.currentUser,d=b.firestore();console.log(ca);var p=la("https://api.themoviedb.org/3/movie/".concat(u,"?api_key=dc15dc94ad3132023e29552c1fe96161&language=en-US")),h=Object(oe.a)(p,1)[0],f=h.original_title;b.auth().onAuthStateChanged((function(e){e?ca=e.uid:console.log("no user logged in")}));var E="https://image.tmdb.org/t/p/w500/".concat(h.poster_path);return r.a.createElement(le.a,{container:!0,spacing:5,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(le.a,{item:!0,xs:10},r.a.createElement($e.a,{className:c.root},r.a.createElement(ea.a,null,r.a.createElement(na.a,{component:"img",alt:"{data.original_title}",image:E,title:h.original_title}),r.a.createElement(ta.a,null,r.a.createElement(Ne.a,{gutterBottom:!0,variant:"h5",component:"h2"},h.original_title),r.a.createElement(Ne.a,{variant:"body2",color:"textSecondary",component:"p"},h.overview))),r.a.createElement(aa.a,null,m&&(!0===l&&r.a.createElement(g.a,{size:"small",color:"primary",value:h.original_title,onClick:function(){s(!1),d.collection("users").doc(ca).update({favorites:b.firestore.FieldValue.arrayUnion(f)})}},"Add To Favorites")||r.a.createElement(g.a,{size:"small",color:"primary",value:h.original_title,onClick:function(){s(!0),d.collection("users").doc(ca).update({favorites:b.firestore.FieldValue.arrayRemove(f)})}},"Remove From Favorites")),!m&&r.a.createElement(g.a,{size:"small",color:"primary",value:h.original_title,onClick:function(){console.log("button state login")}},"Login")))))}var ma=t(5278),da=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).signInWithEmailLink=function(){if(!e.props.user){var a=window.location.href;if(a&&C.isSignInWithEmailLink(a)){var t=localStorage.getItem("emailAddress");if(!t)return void e.props.history.push("/");O.signInWithEmailLink(t,a).then((function(a){var t=a.user,n=t.displayName,r=t.email;e.props.openSnackbar("Signed in as ".concat(n||r))})).catch((function(a){var t=a.code,n=a.message;switch(t){case"auth/expired-action-code":case"auth/invalid-email":case"auth/user-disabled":e.props.openSnackbar(n);break;default:return void e.props.openSnackbar(n)}})).finally((function(){e.props.history.push("/")}))}}},e}return Object(c.a)(t,[{key:"render",value:function(){return this.props.user?r.a.createElement(_e,{icon:r.a.createElement(ma.a,null),title:"Home"}):r.a.createElement(_e,{title:"RMUIF",description:"This is where the movies will go"})}},{key:"componentDidMount",value:function(){this.signInWithEmailLink()}}]),t}(n.Component),pa=Object(Xe.h)(da),ha=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_e,{title:"Admin"})}}]),t}(n.Component),fa=t(5280),ga=Object(he.a)({center:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"}});var Ea=function(){var e=ga();return r.a.createElement("div",{className:e.center},r.a.createElement(Fe.a,null))},va=function(e){var a=b.auth().currentUser,t=b.auth().currentUser.uid,n=b.firestore().collection("users").doc(t);console.log(a.uid,"this is fav props");var o=function(e){e.target.name;var a=e.target.value;console.log(a,"this is ondelete"),n.update({favorites:b.firestore.FieldValue.arrayRemove(a)})};return r.a.createElement("ul",null,a.favorites.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("p",null,r.a.createElement("button",{size:"small",color:"primary",value:e,onClick:o},e)))})))},ba=t(5279);var ya=function(e){var a=e.user;return console.log("this is usercardFavs",a.favorites),r.a.createElement($e.a,null,r.a.createElement(ba.a,{title:"".concat(a.firstName," ").concat(a.lastName),subheader:a.username}),r.a.createElement(va,null))},Ca=Object(he.a)({grid:{margin:0,width:"100%"}});var Aa=function(){var e=Object(n.useState)(!0),a=Object(oe.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)(null),l=Object(oe.a)(i,2),s=l[0],c=l[1],u=Object(n.useState)(null),m=Object(oe.a)(u,2),d=m[0],p=m[1],h=Object(Xe.g)().userId,f=Ca();return Object(n.useEffect)((function(){return A.collection("users").doc(h).onSnapshot((function(e){o(!1),c(e.data())}),(function(e){o(!1),p(e)}))}),[h]),d?r.a.createElement(_e,{icon:r.a.createElement(re.a,null),title:"Something went wrong",description:"There was an error while trying to fetch the requested user"}):t?r.a.createElement(Ea,null):s?r.a.createElement(le.a,{className:f.grid,container:!0,justify:"center",spacing:5},r.a.createElement(le.a,{item:!0,xs:6},r.a.createElement(ya,{user:s}))):r.a.createElement(_e,{icon:r.a.createElement(fa.a,null),title:"User not found",description:"The requested user was not found"})},Sa=t(5281),wa=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_e,{icon:r.a.createElement(Sa.a,null),title:"Content not found",description:"The requested URL was not found on this server"})}}]),t}(n.Component),ka=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=e.user,t=e.roles,n=e.bar,o=this.props.openSnackbar;return r.a.createElement(ue.a,{basename:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_DESCRIPTION:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyBJHZRI01LDK-aGm_tvfwHLUKVDP8F6uoo",REACT_APP_FIREBASE_APP_ID:"1:894860019248:web:6bae2e2dce08b006240ff5",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-tmdb-movie-app.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://tmdb-movie-app.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-995W50NDG2",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"894860019248",REACT_APP_FIREBASE_PROJECT_ID:"tmdb-movie-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"tmdb-movie-app.appspot.com",REACT_APP_HOMEPAGE:"",REACT_APP_NAME:"my-app",REACT_APP_SENTRY_DSN:"https://78536326e6524916b6f44b4ea510b7a4@sentry.io/1846624",REACT_APP_THEME_DARK:"true",REACT_APP_THEME_PRIMARY_COLOR:"blue",REACT_APP_THEME_SECONDARY_COLOR:"red",REACT_APP_TITLE:"My Movie App",REACT_APP_VERSION:"0.1.0"}).REACT_APP_BASENAME},n,r.a.createElement(Xe.d,null,r.a.createElement(Xe.b,{path:"/",exact:!0},r.a.createElement(pa,{user:a,openSnackbar:o})),r.a.createElement(Xe.b,{path:"/admin"},a&&t.includes("admin")?r.a.createElement(ha,null):r.a.createElement(Xe.a,{to:"/"})),r.a.createElement(Xe.b,{path:"/user/:userId"},a?r.a.createElement(Aa,null):r.a.createElement(Xe.a,{to:"/"})),r.a.createElement(Xe.b,{path:"/:MovieId"},r.a.createElement(ua,{user:a})),r.a.createElement(Xe.b,null,r.a.createElement(wa,null))))}}]),t}(n.Component),Pa=t(5321),Oa=t(5324),Da=t(5283),ja=t(5325),Ia=t(5285),xa=t(5261),Na=t(5202),Ua=t(5286),_a=t(5284),Ta=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props.dialogProps,t=this.props.user;return r.a.createElement(Oa.a,Object.assign({fullWidth:!0,maxWidth:"xs"},a),r.a.createElement(Da.a,{disableTypography:!0},r.a.createElement(Ne.a,{variant:"h6"},"About"),r.a.createElement(ja.a,{title:"Close"},r.a.createElement(Ae.a,{className:e.closeButton,onClick:a.onClose},r.a.createElement(_a.a,null)))),r.a.createElement(Ia.a,null,r.a.createElement(xa.a,{disablePadding:!0},r.a.createElement(Na.a,null,r.a.createElement(Ua.a,{primary:"Version",secondary:"0.1.0"})),t&&r.a.createElement(Na.a,null,r.a.createElement(Ua.a,{primary:"UID",secondary:t.uid})))))}}]),t}(n.Component),Ra=Object(Re.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)}}}))(Ta),Fa=t(37),La=t.n(Fa),Wa=t(5327),Ba=t(5290),Ka=t(35),Ma=[{providerId:"apple.com",color:"#000000",icon:r.a.createElement(Ka.a,null),name:"Apple"},{providerId:"facebook.com",color:"#3c5a99",icon:r.a.createElement(Ka.b,null),name:"Facebook"},{providerId:"github.com",color:"#24292e",icon:r.a.createElement(Ka.c,null),name:"GitHub"},{providerId:"google.com",color:"#4285f4",icon:r.a.createElement(Ka.d,null),name:"Google"},{providerId:"microsoft.com",color:"#f65314",icon:r.a.createElement(Ka.e,null),name:"Microsoft"},{providerId:"twitter.com",color:"#1da1f2",icon:r.a.createElement(Ka.f,null),name:"Twitter"},{providerId:"yahoo.com",color:"#410093",icon:r.a.createElement(Ka.g,null),name:"Yahoo"}],za=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=e.gutterBottom,t=e.performingAction,n=this.props.onAuthProviderClick;return r.a.createElement(xe.a,{mb:a?3:0},r.a.createElement(ze.a,{disabled:t,fullWidth:!0,orientation:"vertical",variant:"outlined"},Ma.map((function(e){var a=Object(Re.a)({root:{color:e.color}})(g.a);return r.a.createElement(a,{key:e.providerId,startIcon:e.icon,onClick:function(){return n(e.providerId)}},e.name)}))))}}]),t}(n.Component);za.defaultProps={gutterBottom:!1,performingAction:!1};var qa=za,Va={firstName:{presence:{allowEmpty:!1},type:"string"},lastName:{presence:{allowEmpty:!1},type:"string"},username:{length:{minimum:2,maximum:20},presence:{allowEmpty:!1},type:"string"},emailAddress:{email:{message:"^E-mail address is invalid"},presence:{allowEmpty:!1},type:"string"},emailAddressConfirmation:{email:{message:"^E-mail address confirmation is invalid"},equality:{attribute:"emailAddress",message:"^E-mail address confirmation is not equal to e-mail address"},presence:{allowEmpty:!1},type:"string"},password:{length:{minimum:6},presence:{allowEmpty:!1},type:"string"},passwordConfirmation:{equality:"password",length:{minimum:6},presence:{allowEmpty:!1},type:"string"}},Ha={performingAction:!1,emailAddress:"",emailAddressConfirmation:"",password:"",passwordConfirmation:"",errors:null},Ga=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).signUp=function(){var e=n.state,a=e.emailAddress,t=e.emailAddressConfirmation,r=e.password,o=e.passwordConfirmation,i=La()({emailAddress:a,emailAddressConfirmation:t,password:r,passwordConfirmation:o},{emailAddress:Va.emailAddress,emailAddressConfirmation:Va.emailAddressConfirmation,password:Va.password,passwordConfirmation:Va.passwordConfirmation});i?n.setState({errors:i}):n.setState({performingAction:!0,errors:null},(function(){O.signUpWithEmailAddressAndPassword(a,r).then((function(e){n.props.dialogProps.onClose()})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/email-already-in-use":case"auth/invalid-email":case"auth/operation-not-allowed":case"auth/weak-password":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))},n.signInWithAuthProvider=function(e){n.setState({performingAction:!0},(function(){O.signInWithAuthProvider(e).then((function(e){n.props.dialogProps.onClose((function(){var a=e.displayName,t=e.email;n.props.openSnackbar("Signed in as ".concat(a||t))}))})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/account-exists-with-different-credential":case"auth/auth-domain-config-required":case"auth/cancelled-popup-request":case"auth/operation-not-allowed":case"auth/operation-not-supported-in-this-environment":case"auth/popup-blocked":case"auth/popup-closed-by-user":case"auth/unauthorized-domain":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))},n.handleKeyPress=function(e){var a=n.state,t=a.emailAddress,r=a.emailAddressConfirmation,o=a.password,i=a.passwordConfirmation;if(t&&r&&o&&i){var l=e.key;e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||"Enter"===l&&n.signUp()}},n.handleExited=function(){n.setState(Ha)},n.handleEmailAddressChange=function(e){var a=e.target.value;n.setState({emailAddress:a})},n.handleEmailAddressConfirmationChange=function(e){var a=e.target.value;n.setState({emailAddressConfirmation:a})},n.handlePasswordChange=function(e){var a=e.target.value;n.setState({password:a})},n.handlePasswordConfirmationChange=function(e){var a=e.target.value;n.setState({passwordConfirmation:a})},n.state=Ha,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props.dialogProps,t=this.state,n=t.performingAction,o=t.emailAddress,i=t.emailAddressConfirmation,l=t.password,s=t.passwordConfirmation,c=t.errors;return r.a.createElement(Oa.a,Object.assign({fullWidth:!0,maxWidth:"sm",disableBackdropClick:n,disableEscapeKeyDown:n},a,{onKeyPress:this.handleKeyPress,onExited:this.handleExited}),r.a.createElement(Da.a,{disableTypography:!0},r.a.createElement(Ne.a,{variant:"h6"},"Sign up for an account"),r.a.createElement(ja.a,{title:"Close"},r.a.createElement(Ae.a,{className:e.closeButton,disabled:n,onClick:a.onClose},r.a.createElement(_a.a,null)))),r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(Ia.a,null,r.a.createElement(le.a,{container:!0,direction:"row"},r.a.createElement(le.a,{item:!0,xs:4},r.a.createElement(qa,{performingAction:n,onAuthProviderClick:this.signInWithAuthProvider})),r.a.createElement(le.a,{item:!0,xs:1},r.a.createElement(Me.a,{className:e.divider,orientation:"vertical"})),r.a.createElement(le.a,{item:!0,xs:7},r.a.createElement(le.a,{container:!0,direction:"column",spacing:2},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!c||!c.emailAddress),fullWidth:!0,helperText:c&&c.emailAddress?c.emailAddress[0]:"",label:"E-mail address",placeholder:"john@doe.com",required:!0,type:"email",value:o,variant:"outlined",onChange:this.handleEmailAddressChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!c||!c.emailAddressConfirmation),fullWidth:!0,helperText:c&&c.emailAddressConfirmation?c.emailAddressConfirmation[0]:"",label:"E-mail address confirmation",placeholder:"john@doe.com",required:!0,type:"email",value:i,variant:"outlined",onChange:this.handleEmailAddressConfirmationChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"new-password",disabled:n,error:!(!c||!c.password),fullWidth:!0,helperText:c&&c.password?c.password[0]:"",label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:l,variant:"outlined",onChange:this.handlePasswordChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"password",disabled:n,error:!(!c||!c.passwordConfirmation),fullWidth:!0,helperText:c&&c.passwordConfirmation?c.passwordConfirmation[0]:"",label:"Password confirmation",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:s,variant:"outlined",onChange:this.handlePasswordConfirmationChange}))))))),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(Ia.a,null,r.a.createElement(qa,{gutterBottom:!0,performingAction:n,onAuthProviderClick:this.signInWithAuthProvider}),r.a.createElement(le.a,{container:!0,direction:"column",spacing:2},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!c||!c.emailAddress),fullWidth:!0,helperText:c&&c.emailAddress?c.emailAddress[0]:"",label:"E-mail address",placeholder:"john@doe.com",required:!0,type:"email",value:o,variant:"outlined",onChange:this.handleEmailAddressChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!c||!c.emailAddressConfirmation),fullWidth:!0,helperText:c&&c.emailAddressConfirmation?c.emailAddressConfirmation[0]:"",label:"E-mail address confirmation",placeholder:"john@doe.com",required:!0,type:"email",value:i,variant:"outlined",onChange:this.handleEmailAddressConfirmationChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"new-password",disabled:n,error:!(!c||!c.password),fullWidth:!0,helperText:c&&c.password?c.password[0]:"",label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:l,variant:"outlined",onChange:this.handlePasswordChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"password",disabled:n,error:!(!c||!c.passwordConfirmation),fullWidth:!0,helperText:c&&c.passwordConfirmation?c.passwordConfirmation[0]:"",label:"Password confirmation",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:s,variant:"outlined",onChange:this.handlePasswordConfirmationChange}))))),r.a.createElement(Ba.a,null,r.a.createElement(g.a,{color:"primary",disabled:!o||!i||!l||!s||n,variant:"contained",onClick:this.signUp},"Sign up")))}}]),t}(n.Component),Ya=Object(Re.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},icon:{marginRight:e.spacing(.5)},divider:{margin:"auto"},grid:{marginBottom:e.spacing(2)}}}))(Ga),Ja={performingAction:!1,emailAddress:"",password:"",errors:null},Qa=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).getSignInButton=function(){var e=n.state,a=e.emailAddress,t=e.password,o=e.performingAction;return a&&!t?r.a.createElement(g.a,{color:"primary",disabled:!a||o,variant:"contained",onClick:function(){return n.sendSignInLinkToEmail()}},"Send sign-in link"):r.a.createElement(g.a,{color:"primary",disabled:!a||o,variant:"contained",onClick:function(){return n.signIn()}},"Sign in")},n.resetPassword=function(){var e=n.state.emailAddress,a=La()({emailAddress:e},{emailAddress:Va.emailAddress});a?n.setState({errors:a}):n.setState({errors:null},(function(){n.setState({performingAction:!0},(function(){O.resetPassword(e).then((function(a){n.props.openSnackbar("Sent password reset e-mail to ".concat(e))})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/invalid-email":case"auth/missing-android-pkg-name":case"auth/missing-continue-uri":case"auth/missing-ios-bundle-id":case"auth/invalid-continue-uri":case"auth/unauthorized-continue-uri":case"auth/user-not-found":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.signIn=function(){var e=n.state,a=e.emailAddress,t=e.password,r=La()({emailAddress:a,password:t},{emailAddress:Va.emailAddress,password:Va.password});r?n.setState({errors:r}):n.setState({performingAction:!0,errors:null},(function(){O.signIn(a,t).then((function(e){n.props.dialogProps.onClose((function(){var a=e.displayName,t=e.email;n.props.openSnackbar("Signed in as ".concat(a||t))}))})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":case"auth/wrong-password":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))},n.sendSignInLinkToEmail=function(){var e=n.state.emailAddress,a=La()({emailAddress:e},{emailAddress:Va.emailAddress});a?n.setState({errors:a}):n.setState({performingAction:!0,errors:null},(function(){O.sendSignInLinkToEmail(e).then((function(){n.props.dialogProps.onClose((function(){n.props.openSnackbar("Sent sign-in e-mail to ".concat(e))}))})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/argument-error":case"auth/invalid-email":case"auth/missing-android-pkg-name":case"auth/missing-continue-uri":case"auth/missing-ios-bundle-id":case"auth/invalid-continue-uri":case"auth/unauthorized-continue-uri":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))},n.signInWithAuthProvider=function(e){n.setState({performingAction:!0},(function(){O.signInWithAuthProvider(e).then((function(e){n.props.dialogProps.onClose((function(){var a=e.displayName,t=e.email;n.props.openSnackbar("Signed in as ".concat(a||t))}))})).catch((function(e){var a=e.code,t=e.message;switch(a){case"auth/account-exists-with-different-credential":case"auth/auth-domain-config-required":case"auth/cancelled-popup-request":case"auth/operation-not-allowed":case"auth/operation-not-supported-in-this-environment":case"auth/popup-blocked":case"auth/popup-closed-by-user":case"auth/unauthorized-domain":default:return void n.props.openSnackbar(t)}})).finally((function(){n.setState({performingAction:!1})}))}))},n.handleKeyPress=function(e){var a=n.state,t=a.emailAddress,r=a.password;if(t||r){var o=e.key;e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||"Enter"===o&&(t&&!r?n.sendSignInLinkToEmail():n.signIn())}},n.handleExited=function(){n.setState(Ja)},n.handleEmailAddressChange=function(e){var a=e.target.value;n.setState({emailAddress:a})},n.handlePasswordChange=function(e){var a=e.target.value;n.setState({password:a})},n.state=Ja,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props.dialogProps,t=this.state,n=t.performingAction,o=t.emailAddress,i=t.password,l=t.errors;return r.a.createElement(Oa.a,Object.assign({fullWidth:!0,maxWidth:"sm",disableBackdropClick:n,disableEscapeKeyDown:n},a,{onKeyPress:this.handleKeyPress,onExited:this.handleExited}),r.a.createElement(Da.a,{disableTypography:!0},r.a.createElement(Ne.a,{variant:"h6"},"Sign in to your account"),r.a.createElement(ja.a,{title:"Close"},r.a.createElement(Ae.a,{className:e.closeButton,disabled:n,onClick:a.onClose},r.a.createElement(_a.a,null)))),r.a.createElement(Ia.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(le.a,{container:!0,direction:"row"},r.a.createElement(le.a,{item:!0,xs:4},r.a.createElement(qa,{performingAction:n,onAuthProviderClick:this.signInWithAuthProvider})),r.a.createElement(le.a,{item:!0,xs:1},r.a.createElement(Me.a,{className:e.divider,orientation:"vertical"})),r.a.createElement(le.a,{item:!0,xs:7},r.a.createElement(le.a,{container:!0,direction:"column",spacing:2},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!l||!l.emailAddress),fullWidth:!0,helperText:l&&l.emailAddress?l.emailAddress[0]:"",label:"E-mail address",placeholder:"john@doe.com",required:!0,type:"email",value:o,variant:"outlined",onChange:this.handleEmailAddressChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"current-password",disabled:n,error:!(!l||!l.password),fullWidth:!0,helperText:l&&l.password?l.password[0]:"",label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:i,variant:"outlined",onChange:this.handlePasswordChange})))))),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(qa,{gutterBottom:!0,performingAction:n,onAuthProviderClick:this.signInWithAuthProvider}),r.a.createElement(le.a,{container:!0,direction:"column",spacing:2},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"email",disabled:n,error:!(!l||!l.emailAddress),fullWidth:!0,helperText:l&&l.emailAddress?l.emailAddress[0]:"",label:"E-mail address",placeholder:"john@doe.com",required:!0,type:"email",value:o,variant:"outlined",onChange:this.handleEmailAddressChange})),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(Wa.a,{autoComplete:"current-password",disabled:n,error:!(!l||!l.password),fullWidth:!0,helperText:l&&l.password?l.password[0]:"",label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,type:"password",value:i,variant:"outlined",onChange:this.handlePasswordChange}))))),r.a.createElement(Ba.a,null,r.a.createElement(g.a,{color:"primary",disabled:!o||n,variant:"outlined",onClick:this.resetPassword},"Reset password"),this.getSignInButton()))}}]),t}(n.Component),Za=Object(Re.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},icon:{marginRight:e.spacing(.5)},divider:{margin:"auto"},grid:{marginBottom:e.spacing(2)}}}))(Qa),Xa=t(5318),$a=t(5312),et=t(5310),at=t(5308),tt=t(5311),nt=t(149),rt=t.n(nt),ot=t(5291),it=t(5292),lt=t(5282),st=t(5295),ct=t(5297),ut=t(5294),mt=t(5293),dt=t(5298),pt=t(5299),ht=t(5296),ft=t(5300),gt=t(5301),Et=t(5302),vt={profileCompletion:0,securityRating:0,showingField:"",avatar:null,avatarUrl:"",firstName:"",lastName:"",username:"",emailAddress:"",performingAction:!1,loadingAvatar:!1,sentVerificationEmail:!1,errors:null},bt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).getNameInitialsOrIcon=function(){var e=n.props.user;if(!e)return null;var a=n.props,t=a.classes,o=a.userData;if(!o)return r.a.createElement(Ge.a,{className:t.personIcon});var i=O.getNameInitials(Object(ie.a)({},e,{},o));return i?r.a.createElement(Ne.a,{className:t.nameInitials,variant:"h2"},i):r.a.createElement(Ge.a,{className:t.personIcon})},n.uploadAvatar=function(){var e=n.state.avatar;e&&n.setState({performingAction:!0,loadingAvatar:!0},(function(){O.changeAvatar(e).then((function(e){var a=n.props,t=a.user,r=a.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},t,{},r))})})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1,loadingAvatar:!1,avatar:null,avatarUrl:""})}))}))},n.removeAvatar=function(){var e=n.props.user,a=n.state,t=a.avatar,r=a.avatarUrl;(e.photoURL||t||r)&&(!e.photoURL&&t&&r||e.photoURL&&t&&r?(URL.revokeObjectURL(r),n.setState({avatar:null,avatarUrl:""})):!e.photoURL||t||r||n.setState({performingAction:!0,loadingAvatar:!0},(function(){O.removeAvatar().then((function(e){var a=n.props,t=a.user,r=a.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},t,{},r))})})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1,loadingAvatar:!1})}))})))},n.showField=function(e){e&&n.setState({showingField:e})},n.hideFields=function(e){n.setState({showingField:"",firstName:"",lastName:"",username:"",emailAddress:"",errors:null},(function(){e&&"function"===typeof e&&e()}))},n.changeFirstName=function(){var e=n.state.firstName,a=La()({firstName:e},{firstName:Va.firstName});a?n.setState({errors:a}):n.setState({errors:null},(function(){var a=n.props.userData;e!==a.firstName&&n.setState({performingAction:!0},(function(){O.changeFirstName(e).then((function(){var e=n.props,a=e.user,t=e.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},a,{},t))},(function(){n.hideFields()}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.changeLastName=function(){var e=n.state.lastName,a=La()({lastName:e},{lastName:Va.lastName});a?n.setState({errors:a}):n.setState({errors:null},(function(){var a=n.props.userData;e!==a.lastName&&n.setState({performingAction:!0},(function(){O.changeLastName(e).then((function(){var e=n.props,a=e.user,t=e.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},a,{},t))},(function(){n.hideFields()}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.changeUsername=function(){var e=n.state.username,a=La()({username:e},{username:Va.username});a?n.setState({errors:a}):n.setState({errors:null},(function(){var a=n.props.userData;e!==a.username&&n.setState({performingAction:!0},(function(){O.changeUsername(e).then((function(){var e=n.props,a=e.user,t=e.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},a,{},t))},(function(){n.hideFields()}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.changeEmailAddress=function(){var e=n.state.emailAddress,a=La()({emailAddress:e},{emailAddress:Va.emailAddress});a?n.setState({errors:a}):n.setState({errors:null},(function(){var a=n.props.user;e!==a.email&&n.setState({performingAction:!0},(function(){O.changeEmailAddress(e).then((function(){var e=n.props,a=e.user,t=e.userData;n.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},a,{},t))},(function(){n.hideFields()}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.verifyEmailAddress=function(){n.setState({performingAction:!0},(function(){O.verifyEmailAddress().then((function(){n.setState({sentVerificationEmail:!0},(function(){n.props.openSnackbar("Sent verification e-mail")}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))},n.changeField=function(e){switch(e){case"first-name":return void n.changeFirstName();case"last-name":return void n.changeLastName();case"username":return void n.changeUsername();case"email-address":return void n.changeEmailAddress();default:return}},n.handleKeyDown=function(e,a){if(e&&a&&!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var t=e.key;t&&("Escape"===t?n.hideFields():"Enter"===t&&n.changeField(a))}},n.handleAvatarChange=function(e){if(e){var a=e.target.files;if(a){var t=a[0];if(t){["image/gif","image/jpeg","image/png","image/webp","image/svg+xml"].includes(t.type)&&(t.size>20971520||n.setState({avatar:t,avatarUrl:URL.createObjectURL(t)}))}}}},n.handleFirstNameChange=function(e){if(e){var a=e.target.value;n.setState({firstName:a})}},n.handleLastNameChange=function(e){if(e){var a=e.target.value;n.setState({lastName:a})}},n.handleUsernameChange=function(e){if(e){var a=e.target.value;n.setState({username:a})}},n.handleEmailAddressChange=function(e){if(e){var a=e.target.value;n.setState({emailAddress:a})}},n.state=vt,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes,t=this.props,n=t.user,o=t.userData,i=this.props.onDeleteAccountClick,l=this.state,s=l.profileCompletion,c=l.securityRating,u=l.showingField,m=l.performingAction,d=l.loadingAvatar,p=l.avatar,h=l.avatarUrl,f=l.firstName,E=l.lastName,v=l.username,b=l.emailAddress,y=l.sentVerificationEmail,C=l.errors,A=o&&o.firstName,S=o&&o.lastName,w=o&&o.username;return r.a.createElement(Ia.a,{classes:{root:a.dialogContent}},r.a.createElement(xe.a,{mb:2},r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(le.a,{alignItems:"center",container:!0},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(xe.a,{textAlign:"center"},r.a.createElement(xe.a,{mb:1.5},p&&h&&r.a.createElement(ot.a,{classes:{badge:a.badge},badgeContent:r.a.createElement(ja.a,{title:"Remove"},r.a.createElement(it.a,{classes:{sizeSmall:a.small},color:"secondary",disabled:m,size:"small",onClick:this.removeAvatar},r.a.createElement(_a.a,{fontSize:"small"})))},d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(lt.a,{style:{transitionDelay:"1s"},in:d,unmountOnExit:!0},r.a.createElement(Fe.a,{size:120,thickness:1.8}))},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:h})),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:h})),!p&&!h&&r.a.createElement(r.a.Fragment,null,n.photoURL&&r.a.createElement(ot.a,{classes:{badge:a.badge},badgeContent:r.a.createElement(ja.a,{title:"Remove"},r.a.createElement(it.a,{classes:{sizeSmall:a.small},color:"secondary",disabled:m,size:"small",onClick:this.removeAvatar},r.a.createElement(_a.a,{fontSize:"small"})))},d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(lt.a,{style:{transitionDelay:"1s"},in:d,unmountOnExit:!0},r.a.createElement(Fe.a,{size:120,thickness:1.8}))},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:n.photoURL})),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:n.photoURL})),!n.photoURL&&r.a.createElement(r.a.Fragment,null,d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(lt.a,{style:{transitionDelay:"1s"},in:d,unmountOnExit:!0},r.a.createElement(Fe.a,{size:120,thickness:1.8}))},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar"},this.getNameInitialsOrIcon())),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar"},this.getNameInitialsOrIcon())))),p&&h&&r.a.createElement(g.a,{color:"primary",disabled:m,startIcon:r.a.createElement(mt.a,null),variant:"contained",onClick:this.uploadAvatar},"Upload"),!p&&!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:"avatar-input",type:"file",hidden:!0,accept:"image/*",onChange:this.handleAvatarChange}),r.a.createElement("label",{htmlFor:"avatar-input"},r.a.createElement(g.a,{color:"primary",component:"span",disabled:m,startIcon:r.a.createElement(ut.a,null),variant:"contained"},"Choose..."))))),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(xe.a,{textAlign:"center"},r.a.createElement(Ne.a,{variant:"body1"},"Profile completion"),0===s&&r.a.createElement(Ne.a,{color:"error",variant:"h5"},s,"%"),100===s&&r.a.createElement(Ne.a,{color:"primary",variant:"h5"},s,"%"),0!==s&&100!==s&&r.a.createElement(Ne.a,{color:"secondary",variant:"h5"},s,"%"))),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(xe.a,{textAlign:"center"},r.a.createElement(Ne.a,{variant:"body1"},"Security rating"),0===c&&r.a.createElement(Ne.a,{color:"error",variant:"h5"},c,"%"),100===c&&r.a.createElement(Ne.a,{color:"primary",variant:"h5"},c,"%"),0!==c&&100!==c&&r.a.createElement(Ne.a,{color:"secondary",variant:"h5"},c,"%"))))),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(xe.a,{textAlign:"center",mb:3},r.a.createElement(xe.a,{mb:1.5},p&&h&&r.a.createElement(ot.a,{classes:{badge:a.badge},badgeContent:r.a.createElement(ja.a,{title:"Remove"},r.a.createElement(it.a,{classes:{sizeSmall:a.small},color:"secondary",disabled:m,size:"small",onClick:this.removeAvatar},r.a.createElement(_a.a,{fontSize:"small"})))},d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(lt.a,{style:{transitionDelay:"1s"},in:d,unmountOnExit:!0},r.a.createElement(Fe.a,{size:120,thickness:1.8}))},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:h})),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:h})),!p&&!h&&r.a.createElement(r.a.Fragment,null,n.photoURL&&r.a.createElement(ot.a,{classes:{badge:a.badge},badgeContent:r.a.createElement(ja.a,{title:"Remove"},r.a.createElement(it.a,{classes:{sizeSmall:a.small},color:"secondary",disabled:m,size:"small",onClick:this.removeAvatar},r.a.createElement(_a.a,{fontSize:"small"})))},d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(Fe.a,{size:120,thickness:1.8})},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:n.photoURL})),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar",src:n.photoURL})),!n.photoURL&&r.a.createElement(r.a.Fragment,null,d&&r.a.createElement(ot.a,{classes:{badge:a.loadingBadge},badgeContent:r.a.createElement(lt.a,{style:{transitionDelay:"1s"},in:d,unmountOnExit:!0},r.a.createElement(Fe.a,{size:120,thickness:1.8}))},r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar"},this.getNameInitialsOrIcon())),!d&&r.a.createElement(qe.a,{className:a.avatar,alt:"Avatar"},this.getNameInitialsOrIcon())))),p&&h&&r.a.createElement(g.a,{color:"primary",disabled:m,startIcon:r.a.createElement(mt.a,null),variant:"contained",onClick:this.uploadAvatar},"Upload"),!p&&!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:"avatar-input",type:"file",hidden:!0,accept:"image/*",onChange:this.handleAvatarChange}),r.a.createElement("label",{htmlFor:"avatar-input"},r.a.createElement(g.a,{color:"primary",component:"span",disabled:m,startIcon:r.a.createElement(ut.a,null),variant:"contained"},"Choose...")))),r.a.createElement(le.a,{container:!0},r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(xe.a,{textAlign:"center"},r.a.createElement(Ne.a,{variant:"body1"},"Profile completion"),0===s&&r.a.createElement(Ne.a,{color:"error",variant:"h5"},s,"%"),100===s&&r.a.createElement(Ne.a,{color:"primary",variant:"h5"},s,"%"),0!==s&&100!==s&&r.a.createElement(Ne.a,{color:"secondary",variant:"h5"},s,"%"))),r.a.createElement(le.a,{item:!0,xs:!0},r.a.createElement(xe.a,{textAlign:"center"},r.a.createElement(Ne.a,{variant:"body1"},"Security rating"),0===c&&r.a.createElement(Ne.a,{color:"error",variant:"h5"},c,"%"),100===c&&r.a.createElement(Ne.a,{color:"primary",variant:"h5"},c,"%"),0!==c&&100!==c&&r.a.createElement(Ne.a,{color:"secondary",variant:"h5"},c,"%")))))),r.a.createElement(xa.a,{disablePadding:!0},r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Ge.a,null))),!A&&r.a.createElement(st.a,null,r.a.createElement(ja.a,{title:"No first name"},r.a.createElement(ht.a,{color:"error"}))),"first-name"===u&&r.a.createElement(Wa.a,{autoComplete:"given-name",autoFocus:!0,disabled:m,error:!(!C||!C.firstName),fullWidth:!0,helperText:C&&C.firstName?C.firstName[0]:"Press Enter to change your first name",label:"First name",placeholder:A&&o.firstName,required:!0,type:"text",value:f,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"first-name")},onChange:this.handleFirstNameChange}),"first-name"!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua.a,{primary:"First name",secondary:A?o.firstName:"You don\u2019t have a first name"}),r.a.createElement(ct.a,null,A&&r.a.createElement(ja.a,{title:"Change"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:m,onClick:function(){return e.showField("first-name")}},r.a.createElement(dt.a,null)))),!A&&r.a.createElement(g.a,{color:"primary",disabled:m,variant:"contained",onClick:function(){return e.showField("first-name")}},"Add")))),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Ge.a,null))),!S&&r.a.createElement(st.a,null,r.a.createElement(ja.a,{title:"No last name"},r.a.createElement(ht.a,{color:"error"}))),"last-name"===u&&r.a.createElement(Wa.a,{autoComplete:"family-name",autoFocus:!0,disabled:m,error:!(!C||!C.lastName),fullWidth:!0,helperText:C&&C.lastName?C.lastName[0]:"Press Enter to change your last name",label:"Last name",placeholder:S&&o.lastName,required:!0,type:"text",value:E,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"last-name")},onChange:this.handleLastNameChange}),"last-name"!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua.a,{primary:"Last name",secondary:S?o.lastName:"You don\u2019t have a last name"}),r.a.createElement(ct.a,null,S&&r.a.createElement(ja.a,{title:"Change"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:m,onClick:function(){return e.showField("last-name")}},r.a.createElement(dt.a,null)))),!S&&r.a.createElement(g.a,{color:"primary",disabled:m,variant:"contained",onClick:function(){return e.showField("last-name")}},"Add")))),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(fa.a,null))),!w&&r.a.createElement(st.a,null,r.a.createElement(ja.a,{title:"No username"},r.a.createElement(ht.a,{color:"error"}))),"username"===u&&r.a.createElement(Wa.a,{autoComplete:"username",autoFocus:!0,disabled:m,error:!(!C||!C.username),fullWidth:!0,helperText:C&&C.username?C.username[0]:"Press Enter to change your username",label:"Username",placeholder:w&&o.username,required:!0,type:"text",value:v,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"username")},onChange:this.handleUsernameChange}),"username"!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua.a,{primary:"Username",secondary:w?o.username:"You don\u2019t have a username"}),r.a.createElement(ct.a,null,w&&r.a.createElement(ja.a,{title:"Change"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:m,onClick:function(){return e.showField("username")}},r.a.createElement(dt.a,null)))),!w&&r.a.createElement(g.a,{color:"primary",disabled:m,variant:"contained",onClick:function(){return e.showField("username")}},"Add")))),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(pt.a,null))),n.email&&r.a.createElement(st.a,null,r.a.createElement(r.a.Fragment,null,n.emailVerified&&r.a.createElement(ja.a,{title:"Verified"},r.a.createElement(ft.a,{color:"primary"})),!n.emailVerified&&r.a.createElement(ja.a,{title:"Not verified"},r.a.createElement(ht.a,{color:"error"})))),!n.email&&r.a.createElement(st.a,null,r.a.createElement(ja.a,{title:"No e-mail address"},r.a.createElement(ht.a,{color:"error"}))),"email-address"===u&&r.a.createElement(Wa.a,{autoComplete:"email",autoFocus:!0,disabled:m,error:!(!C||!C.emailAddress),fullWidth:!0,helperText:C&&C.emailAddress?C.emailAddress[0]:"Press Enter to change your e-mail address",label:"E-mail address",placeholder:n.email,required:!0,type:"email",value:b,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"email-address")},onChange:this.handleEmailAddressChange}),"email-address"!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua.a,{primary:"E-mail address",secondary:n.email?n.email:"You don\u2019t have an e-mail address"}),n.email&&!n.emailVerified&&r.a.createElement(xe.a,{clone:!0,mr:7},r.a.createElement(ct.a,null,r.a.createElement(ja.a,{title:"Verify"},r.a.createElement("div",null,r.a.createElement(Ae.a,{color:"secondary",disabled:m||y,onClick:this.verifyEmailAddress},r.a.createElement(ft.a,null)))))),r.a.createElement(ct.a,null,n.email&&r.a.createElement(ja.a,{title:"Change"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:m,onClick:function(){return e.showField("email-address")}},r.a.createElement(dt.a,null)))),!n.email&&r.a.createElement(g.a,{color:"primary",disabled:m,variant:"contained",onClick:function(){return e.showField("email-address")}},"Add")))),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(gt.a,null))),r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(Ua.a,{primary:"Signed in",secondary:k()(n.metadata.lastSignInTime).format("LLLL")})),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(Ua.a,{primary:"Signed in",secondary:k()(n.metadata.lastSignInTime).format("llll")}))),r.a.createElement(xe.a,{mt:1,mb:1},r.a.createElement(Me.a,{light:!0})),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Et.a,null))),r.a.createElement(Ua.a,{primary:"Delete account",secondary:"Accounts can\u2019t be recovered"}),r.a.createElement(ct.a,null,r.a.createElement(g.a,{color:"secondary",disabled:m,variant:"contained",onClick:i},"Delete")))))}},{key:"componentDidMount",value:function(){var e=this.props,a=e.user,t=e.userData;this.setState({profileCompletion:O.getProfileCompletion(Object(ie.a)({},a,{},t)),securityRating:O.getSecurityRating(a,t)})}},{key:"componentWillUnmount",value:function(){var e=this.state.avatarUrl;e&&(URL.revokeObjectURL(e),this.setState({avatarUrl:""}))}}]),t}(n.Component),yt=Object(Re.a)((function(e){return{dialogContent:{paddingTop:e.spacing(2)},badge:{top:e.spacing(2),right:-e.spacing(2)},loadingBadge:{top:"50%",right:"50%"},avatar:{marginRight:"auto",marginLeft:"auto",width:e.spacing(14),height:e.spacing(14)},nameInitials:{cursor:"default"},personIcon:{fontSize:e.spacing(7)},small:{width:e.spacing(4),height:e.spacing(4),minHeight:"initial"}}}))(bt),Ct=t(5289),At=t(5326),St=t(5320),wt=t(5322),kt=t(5305),Pt=t(5303),Ot=t(5304),Dt=t(5306),jt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).handlePrimaryColorChange=function(e){if(e){var a=e.target.value;if(a){var t=n.props.theme;t&&t.primaryColor.id!==a&&n.setState({performingAction:!0},(function(){te.changeTheme({primaryColor:a,secondaryColor:t.secondaryColor.id,dark:t.dark}).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}}},n.handleSecondaryColorChange=function(e){if(e){var a=e.target.value;if(a){var t=n.props.theme;t&&t.secondaryColor.id!==a&&n.setState({performingAction:!0},(function(){te.changeTheme({primaryColor:t.primaryColor.id,secondaryColor:a,dark:t.dark}).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}}},n.handleDarkModeChange=function(e){if(e){var a=e.target.checked,t=n.props.theme;t&&t.dark!==a&&n.setState({performingAction:!0},(function(){te.changeTheme({primaryColor:t.primaryColor.id,secondaryColor:t.secondaryColor.id,dark:a}).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}},n.handleResetThemeClick=function(){var e=n.props.theme;e&&(te.isDefaultTheme(e)||n.setState({performingAction:!0},(function(){te.resetTheme().catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))})))},n.state={performingAction:!1,primaryColorLabelWidth:0,secondaryColorLabelWidth:0},n.primaryColorLabel=r.a.createRef(),n.secondaryColorLabel=r.a.createRef(),n}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.theme;if(!e)return null;var a=this.state,t=a.performingAction,n=a.primaryColorLabelWidth,o=a.secondaryColorLabelWidth;return r.a.createElement(Ia.a,null,r.a.createElement(xa.a,{disablePadding:!0},r.a.createElement(xe.a,{mb:1},r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Pt.a,{color:"primary"}))),r.a.createElement(Ct.a,{disabled:t,fullWidth:!0,variant:"outlined"},r.a.createElement(At.a,{ref:this.primaryColorLabel},"Primary color"),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(St.a,{native:!0,value:e.primaryColor.id,labelWidth:n,onChange:this.handlePrimaryColorChange},Object.keys(te.colors).map((function(e){return e=te.colors[e],r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(St.a,{value:e.primaryColor.id,labelWidth:n,onChange:this.handlePrimaryColorChange},Object.keys(te.colors).map((function(e){return e=te.colors[e],r.a.createElement(we.a,{key:e.id,value:e.id},e.name)}))))))),r.a.createElement(xe.a,{mb:1},r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Pt.a,{color:"secondary"}))),r.a.createElement(Ct.a,{disabled:t,fullWidth:!0,variant:"outlined"},r.a.createElement(At.a,{ref:this.secondaryColorLabel},"Secondary color"),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(St.a,{native:!0,value:e.secondaryColor.id,labelWidth:o,onChange:this.handleSecondaryColorChange},Object.keys(te.colors).map((function(e){return e=te.colors[e],r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(St.a,{value:e.secondaryColor.id,labelWidth:o,onChange:this.handleSecondaryColorChange},Object.keys(te.colors).map((function(e){return e=te.colors[e],r.a.createElement(we.a,{key:e.id,value:e.id},e.name)}))))))),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Ot.a,null))),r.a.createElement(Ua.a,{primary:"Dark mode",secondary:"Displays mostly dark surfaces"}),r.a.createElement(ct.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(wt.a,{color:"primary",checked:e.dark,onChange:this.handleDarkModeChange})),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(kt.a,{color:"primary",checked:e.dark,onChange:this.handleDarkModeChange})))),r.a.createElement(xe.a,{mt:2,mb:1},r.a.createElement(Me.a,{light:!0})),r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Dt.a,null))),r.a.createElement(Ua.a,{primary:"Reset theme",secondary:te.isDefaultTheme(e)?"No changes made":"Changes will be reset"}),r.a.createElement(ct.a,null,r.a.createElement(g.a,{color:"secondary",disabled:te.isDefaultTheme(e)||t,variant:"contained",onClick:this.handleResetThemeClick},"Reset")))))}},{key:"componentDidMount",value:function(){this.setState({primaryColorLabelWidth:this.primaryColorLabel.current.offsetWidth,secondaryColorLabelWidth:this.secondaryColorLabel.current.offsetWidth})}}]),t}(n.Component),It=t(5307),xt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).linkAuthProvider=function(e){n.setState({performingAction:!0},(function(){O.linkAuthProvider(e.providerId).then((function(a){n.props.openSnackbar("".concat(e.name," linked"),5)})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))},n.unlinkAuthProvider=function(e){n.setState({performingAction:!0},(function(){O.unlinkAuthProvider(e.providerId).then((function(a){n.props.openSnackbar("".concat(e.name," unlinked"),4)})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))},n.state={performingAction:!1},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.props.theme,t=this.state.performingAction;return r.a.createElement(Ia.a,null,r.a.createElement(xa.a,{disablePadding:!0},Ma.map((function(n){var o=O.authProviderData(n.providerId),i=null;if(o){var l=o.displayName,s=o.email,c=o.phoneNumber;i=l||s||c}return r.a.createElement(Na.a,{key:n.providerId},r.a.createElement(st.a,null,r.a.createElement(xe.a,{color:a.dark?null:n.color},n.icon)),o&&r.a.createElement(Ua.a,{primary:n.name,secondary:i}),!o&&r.a.createElement(Ua.a,{primary:n.name}),r.a.createElement(ct.a,null,o&&r.a.createElement(ja.a,{title:"Unlink"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:t,onClick:function(){return e.unlinkAuthProvider(n)}},r.a.createElement(It.a,null)))),!o&&r.a.createElement(ja.a,{title:"Link"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:t,onClick:function(){return e.linkAuthProvider(n)}},r.a.createElement(at.a,null))))))}))))}}]),t}(n.Component),Nt=t(5309),Ut={showingField:"",password:"",passwordConfirmation:"",performingAction:!1,errors:null},_t=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).showField=function(e){e&&n.setState({showingField:e})},n.hideFields=function(e){n.setState({showingField:"",password:"",passwordConfirmation:"",errors:null},(function(){e&&"function"===typeof e&&e()}))},n.changeField=function(e){switch(e){case"password":var a=n.state.password,t=La()({password:a},{password:Va.password});return t?void n.setState({errors:t}):void n.setState({errors:null},(function(){n.showField("password-confirmation")}));case"password-confirmation":return void n.changePassword();default:return}},n.changePassword=function(){var e=n.state,a=e.password,t=e.passwordConfirmation,r=La()({password:a,passwordConfirmation:t},{password:Va.password,passwordConfirmation:Va.passwordConfirmation});r?n.setState({errors:r}):n.setState({errors:null},(function(){n.setState({performingAction:!0},(function(){O.changePassword(a).then((function(){n.hideFields((function(){n.props.openSnackbar("Changed password")}))})).catch((function(e){e.code;var a=e.message;n.props.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))}))},n.handleKeyDown=function(e,a){if(e&&a&&!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var t=e.key;t&&("Escape"===t?n.hideFields():"Enter"===t&&n.changeField(a))}},n.handlePasswordChange=function(e){if(e){var a=e.target.value;n.setState({password:a})}},n.handlePasswordConfirmationChange=function(e){if(e){var a=e.target.value;n.setState({passwordConfirmation:a})}},n.state=Ut,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.props.userData,t=this.state,n=t.showingField,o=t.password,i=t.passwordConfirmation,l=t.performingAction,s=t.errors,c=a&&a.lastPasswordChange;return r.a.createElement(Ia.a,null,r.a.createElement(xa.a,{disablePadding:!0},r.a.createElement(Na.a,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(st.a,null,r.a.createElement(Nt.a,null))),"password"===n&&r.a.createElement(Wa.a,{autoComplete:"new-password",autoFocus:!0,disabled:l,error:!(!s||!s.password),fullWidth:!0,helperText:s&&s.password?s.password[0]:"Press Enter to change your password",label:"Password",required:!0,type:"password",value:o,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"password")},onChange:this.handlePasswordChange}),"password-confirmation"===n&&r.a.createElement(Wa.a,{autoComplete:"new-password",autoFocus:!0,disabled:l,error:!(!s||!s.passwordConfirmation),fullWidth:!0,helperText:s&&s.passwordConfirmation?s.passwordConfirmation[0]:"Press Enter to change your password",label:"Password confirmation",required:!0,type:"password",value:i,variant:"filled",onBlur:this.hideFields,onKeyDown:function(a){return e.handleKeyDown(a,"password-confirmation")},onChange:this.handlePasswordConfirmationChange}),"password"!==n&&"password-confirmation"!==n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a,{xsDown:!0},r.a.createElement(Ua.a,{primary:"Password",secondary:c?"Last changed ".concat(k()(a.lastPasswordChange.toDate()).format("LL")):"Never changed"})),r.a.createElement(Pa.a,{smUp:!0},r.a.createElement(Ua.a,{primary:"Password",secondary:c?"Last changed ".concat(k()(a.lastPasswordChange.toDate()).format("ll")):"Never changed"})),r.a.createElement(ct.a,null,r.a.createElement(ja.a,{title:"Change"},r.a.createElement("div",null,r.a.createElement(Ae.a,{disabled:l,onClick:function(){return e.showField("password")}},r.a.createElement(dt.a,null)))))))))}}]),t}(n.Component),Tt=[{key:"account",icon:r.a.createElement(He.a,null),label:"Account"},{key:"appearance",icon:r.a.createElement(et.a,null),label:"Appearance"},{key:"links",icon:r.a.createElement(at.a,null),label:"Links"},{key:"security",icon:r.a.createElement(tt.a,null),label:"Security"}],Rt={selectedTab:0},Ft=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).handleExited=function(){n.setState(Rt)},n.handleTabChange=function(e,a){n.setState({selectedTab:a})},n.handleIndexChange=function(e){n.setState({selectedTab:e})},n.state=Rt,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props.dialogProps,t=this.props,n=t.user,o=t.userData,i=t.theme,l=this.props.openSnackbar,s=this.props.onDeleteAccountClick,c=this.state.selectedTab;return r.a.createElement(Oa.a,Object.assign({},a,{onExited:this.handleExited}),r.a.createElement(Da.a,{disableTypography:!0},r.a.createElement(Ne.a,{variant:"h6"},"Settings"),r.a.createElement(ja.a,{title:"Close"},r.a.createElement(Ae.a,{className:e.closeButton,onClick:a.onClose},r.a.createElement(_a.a,null)))),r.a.createElement(Xa.a,{classes:{root:e.tabs},style:{overflow:"initial",minHeight:"initial"},indicatorColor:"primary",textColor:"primary",value:c,variant:"fullWidth",onChange:this.handleTabChange},Tt.map((function(e){return r.a.createElement($a.a,{key:e.key,icon:e.icon,label:e.label})}))),r.a.createElement(rt.a,{index:c,onChangeIndex:this.handleIndexChange},r.a.createElement(yt,{user:n,userData:o,openSnackbar:l,onDeleteAccountClick:s}),r.a.createElement(jt,{theme:i,openSnackbar:l}),r.a.createElement(xt,{theme:i,openSnackbar:l}),r.a.createElement(_t,{user:n,userData:o,openSnackbar:l})))}}]),t}(n.Component),Lt=Object(Re.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},tabs:{display:"initial"}}}))(Ft),Wt=t(5313),Bt={username:""},Kt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).handleKeyPress=function(e){var a=n.props.userData;if(a&&a.username){var t=n.state.username;if(!t)return;if(t!==a.username)return}var r=e.key;e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||"Enter"===r&&n.props.deleteAccount()},n.handleExited=function(){n.setState(Bt)},n.handleUsernameChange=function(e){var a=e.target.value;n.setState({username:a})},n.state=Bt,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.dialogProps,a=this.props,t=a.performingAction,n=a.userData,o=this.props.deleteAccount,i=this.state.username,l=n&&n.username;return r.a.createElement(Oa.a,Object.assign({},e,{onKeyPress:this.handleKeyPress,onExited:this.handleExited}),r.a.createElement(Da.a,null,"Delete account?"),r.a.createElement(Ia.a,null,r.a.createElement(xe.a,{mb:l?2:0},r.a.createElement(Wt.a,null,"Deleted accounts can\u2019t be recovered. All data associated with your account will be deleted."),l&&r.a.createElement(Wt.a,null,"Type your username and ",r.a.createElement(Pa.a,{xsDown:!0},"click"),r.a.createElement(Pa.a,{smUp:!0},"tap")," Delete to delete your account. This action is irreversible.")),l&&r.a.createElement(Wa.a,{autoComplete:"username",autoFocus:!0,color:"secondary",disabled:t,fullWidth:!0,label:"Username",placeholder:n.username,required:!0,type:"text",value:i,variant:"outlined",onChange:this.handleUsernameChange})),r.a.createElement(Ba.a,null,r.a.createElement(g.a,{color:"secondary",disabled:t,onClick:e.onClose},"Cancel"),r.a.createElement(g.a,{color:"secondary",disabled:t||l&&i!==n.username,variant:"contained",onClick:o},"Delete")))}}]),t}(n.Component),Mt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=this.props.dialogProps,t=this.props,n=t.title,o=t.contentText,i=t.dismissiveAction,l=t.confirmingAction,s=t.acknowledgementAction;return(i||l)&&s?(console.error("Dialogs should contain a maximum of two actions. If a single action is provided, it must be an acknowledgement action. If two actions are provided, one must be a confirming action, and the other a dismissing action. Providing a third action such as \u201cLearn more\u201d is not recommended as it navigates the user away from the dialog, leaving the dialog task unfinished. https://material.io/design/components/dialogs.html#actions"),null):r.a.createElement(Oa.a,a,n&&r.a.createElement(Da.a,null,n),r.a.createElement(Ia.a,{className:n?null:e.noTitlePadding},r.a.createElement(Wt.a,null,o)),(i||l||s)&&r.a.createElement(Ba.a,null,i,l,s))}}]),t}(n.Component),zt=Object(Re.a)((function(e){return{noTitlePadding:{paddingTop:e.spacing(3)}}}))(Mt),qt=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=e.performingAction,t=e.theme,n=e.user,o=e.userData,i=e.dialogs,l=this.props.openSnackbar,s=i.aboutDialog,c=i.signUpDialog,u=i.signInDialog,m=i.settingsDialog,d=i.deleteAccountDialog,p=i.signOutDialog;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ra,Object.assign({dialogProps:s.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},s.props)),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(zt,Object.assign({dialogProps:p.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},p.props))),r.a.createElement(Pa.a,{xsDown:!0},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt,Object.assign({dialogProps:d.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},d.props))),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,Object.assign({dialogProps:c.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},c.props)),r.a.createElement(Za,Object.assign({dialogProps:u.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},u.props)))),r.a.createElement(Pa.a,{smDown:!0},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Lt,Object.assign({dialogProps:m.dialogProps,performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},m.props)))),r.a.createElement(Pa.a,{smUp:!0},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt,Object.assign({dialogProps:Object(ie.a)({fullScreen:!0},d.dialogProps),performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},d.props))),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,Object.assign({dialogProps:Object(ie.a)({fullScreen:!0},c.dialogProps),performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},c.props)),r.a.createElement(Za,Object.assign({dialogProps:Object(ie.a)({fullScreen:!0},u.dialogProps),performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},u.props)))),r.a.createElement(Pa.a,{mdUp:!0},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Lt,Object.assign({dialogProps:Object(ie.a)({fullScreen:!0},m.dialogProps),performingAction:a,theme:t,user:n,userData:o,openSnackbar:l},m.props)))))}}]),t}(n.Component),Vt={ready:!1,performingAction:!1,theme:te.defaultTheme,user:null,userData:null,roles:[],aboutDialog:{open:!1},signUpDialog:{open:!1},signInDialog:{open:!1},settingsDialog:{open:!1},deleteAccountDialog:{open:!1},signOutDialog:{open:!1},snackbar:{autoHideDuration:0,message:"",open:!1}},Ht=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).resetState=function(e){n.setState({ready:!0,theme:te.defaultTheme,user:null,userData:null,roles:[]},e)},n.setTheme=function(e,a){e?n.setState({theme:te.createTheme(e)},a):n.setState({theme:te.defaultTheme},a)},n.openDialog=function(e,a){var t=n.state[e];t&&void 0!==t.open&&(t.open=!0,n.setState({dialog:t},a))},n.closeDialog=function(e,a){var t=n.state[e];t&&void 0!==t.open&&(t.open=!1,n.setState({dialog:t},a))},n.closeAllDialogs=function(e){n.setState({aboutDialog:{open:!1},signUpDialog:{open:!1},signInDialog:{open:!1},settingsDialog:{open:!1},deleteAccountDialog:{open:!1},signOutDialog:{open:!1}},e)},n.deleteAccount=function(){n.setState({performingAction:!0},(function(){O.deleteAccount().then((function(){n.closeAllDialogs((function(){n.openSnackbar("Deleted account")}))})).catch((function(e){e.code;var a=e.message;n.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))},n.signOut=function(){n.setState({performingAction:!0},(function(){O.signOut().then((function(){n.closeAllDialogs((function(){n.openSnackbar("Signed out")}))})).catch((function(e){e.code;var a=e.message;n.openSnackbar(a)})).finally((function(){n.setState({performingAction:!1})}))}))},n.openSnackbar=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2?arguments[2]:void 0;n.setState({snackbar:{autoHideDuration:p()(e).time*a,message:e,open:!0}},(function(){t&&"function"===typeof t&&t()}))},n.closeSnackbar=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=n.state.snackbar;n.setState({snackbar:{message:e?"":a.message,open:!1}})},n.state=Vt,n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.ready,n=a.performingAction,o=a.theme,i=a.user,l=a.userData,s=a.roles,c=this.state,u=c.aboutDialog,m=c.signUpDialog,d=c.signInDialog,p=c.settingsDialog,v=c.deleteAccountDialog,b=c.signOutDialog,y=this.state.snackbar;return r.a.createElement(h.a,{theme:o},r.a.createElement(f.a,null),r.a.createElement(Te,null,!t&&r.a.createElement(We,null),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ka,{user:i,roles:s,bar:r.a.createElement(Ze,{performingAction:n,theme:o,user:i,userData:l,roles:s,onSignUpClick:function(){return e.openDialog("signUpDialog")},onSignInClick:function(){return e.openDialog("signInDialog")},onAboutClick:function(){return e.openDialog("aboutDialog")},onSettingsClick:function(){return e.openDialog("settingsDialog")},onSignOutClick:function(){return e.openDialog("signOutDialog")}}),openSnackbar:this.openSnackbar}),r.a.createElement(qt,{performingAction:n,theme:o,user:i,userData:l,openSnackbar:this.openSnackbar,dialogs:{aboutDialog:{dialogProps:{open:u.open,onClose:function(){return e.closeDialog("aboutDialog")}}},signUpDialog:{dialogProps:{open:m.open,onClose:function(a){e.closeDialog("signUpDialog"),a&&"function"===typeof a&&a()}}},signInDialog:{dialogProps:{open:d.open,onClose:function(a){e.closeDialog("signInDialog"),a&&"function"===typeof a&&a()}}},settingsDialog:{dialogProps:{open:p.open,onClose:function(){return e.closeDialog("settingsDialog")}},props:{onDeleteAccountClick:function(){return e.openDialog("deleteAccountDialog")}}},deleteAccountDialog:{dialogProps:{open:v.open,onClose:function(){return e.closeDialog("deleteAccountDialog")}},props:{deleteAccount:this.deleteAccount}},signOutDialog:{dialogProps:{open:b.open,onClose:function(){return e.closeDialog("signOutDialog")}},props:{title:"Sign out?",contentText:"While signed out you are unable to manage your profile and conduct other activities that require you to be signed in.",dismissiveAction:r.a.createElement(g.a,{color:"primary",onClick:function(){return e.closeDialog("signOutDialog")}},"Cancel"),confirmingAction:r.a.createElement(g.a,{color:"primary",disabled:n,variant:"contained",onClick:this.signOut},"Sign Out")}}}}),r.a.createElement(E.a,{autoHideDuration:y.autoHideDuration,message:y.message,open:y.open,onClose:this.closeSnackbar}))))}},{key:"componentDidMount",value:function(){var e=this;this.onAuthStateChangedObserver=C.onAuthStateChanged((function(a){if(!a||!a.uid)return e.userDocumentSnapshotListener&&e.userDocumentSnapshotListener(),void e.resetState();e.userDocumentSnapshotListener=A.collection("users").doc(a.uid).onSnapshot((function(t){var n=t.data();if(!t.exists||!n)return e.userDocumentSnapshotListener&&e.userDocumentSnapshotListener(),void e.resetState();O.getRoles().then((function(t){e.setTheme(n.theme,(function(){e.setState({ready:!0,user:a,userData:n,roles:t||[]})}))})).catch((function(a){e.resetState((function(){a.code;var t=a.message;e.openSnackbar(t)}))}))}),(function(a){e.resetState((function(){a.code;var t=a.message;e.openSnackbar(t)}))}))}),(function(a){e.resetState((function(){a.code;var t=a.message;e.openSnackbar(t)}))}))}},{key:"componentWillUnmount",value:function(){this.onAuthStateChangedObserver&&this.onAuthStateChangedObserver(),this.userDocumentSnapshotListener&&this.userDocumentSnapshotListener()}}]),t}(n.Component),Gt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Yt(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a({dsn:"https://78536326e6524916b6f44b4ea510b7a4@sentry.io/1846624",release:"".concat("my-app","@").concat("0.1.0")}),i.a.render(r.a.createElement(Ht,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");Gt?(!function(e,a){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Yt(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):Yt(a,e)}))}}()}},[[5155,1,2]]]);
//# sourceMappingURL=main.d30666af.chunk.js.map